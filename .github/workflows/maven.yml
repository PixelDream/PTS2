# This workflow will build a Java project with Maven
# For more information see: https://help.github.com/actions/language-and-framework-guides/building-and-testing-java-with-maven

name: Java CI with Maven

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build_etu_linux:
    name: Build Etudiant Linux
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Set up JDK 18
      uses: actions/setup-java@v1
      with:
        java-version: '8.0' # The JDK version to make available on the path. Takes a whole or semver JDK version, or 1.x syntax (e.g. 1.8 => Jdk 8.x). To specify a specific version for JDK 8 or older use the following pattern (8.0.x)
        java-package: jdk+fx # (jre, jdk, or jdk+fx) - defaults to jdk
        architecture: x64 # (x64 or x86) - defaults to x64
    - name: Build with Maven
      run: mvn -B -P Etudiant_lin package --file pom.xml
    - name: Upload a Build Artifact
      uses: actions/upload-artifact@v2.2.4
      with:
        # Artifact name
        name: Reconstitution Etudiant Linux
        path: '/home/runner/work/PTS2/PTS2/target/Etudiant/Reconstitution Etudiant_1.deb'

  build_etu_windows:
    name: Build Etudiant Windows
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v1
      - name: Set up JDK 18
        uses: actions/setup-java@v1
        with:
          java-version: '8.0' # The JDK version to make available on the path. Takes a whole or semver JDK version, or 1.x syntax (e.g. 1.8 => Jdk 8.x). To specify a specific version for JDK 8 or older use the following pattern (8.0.x)
          java-package: jdk+fx # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64 # (x64 or x86) - defaults to x64
      - name: Build with Maven
        run: mvn -B -P Etudiant_win package --file pom.xml
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: Reconstitution Etudiant Windows
          path: '/home/runner/work/PTS2/PTS2/target/Etudiant/Reconstitution Etudiant_1.exe'

  build_etu_mac:
    name: Build Etudiant Mac
    runs-on: macos-latest

    steps:
      - uses: actions/checkout@v1
      - name: Set up JDK 18
        uses: actions/setup-java@v1
        with:
          java-version: '8.0' # The JDK version to make available on the path. Takes a whole or semver JDK version, or 1.x syntax (e.g. 1.8 => Jdk 8.x). To specify a specific version for JDK 8 or older use the following pattern (8.0.x)
          java-package: jdk+fx # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64 # (x64 or x86) - defaults to x64
      -name: Set certificates
        uses: apple-actions/import-codesign-certs@v1
        with:
          p12-file-base64: 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
          p12-password: "!<~*6/bgq:SKZ)L
      - name: Build with Maven
        run: mvn -B -P Etudiant_mac package --file pom.xml
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: Reconstitution Etudiant Mac
          path: '/home/runner/work/PTS2/PTS2/target/Etudiant/Reconstitution Etudiant_1.dmg'

  build_ens_linux:
    name: Build Enseignant Linux
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v1
      - name: Set up JDK 18
        uses: actions/setup-java@v1
        with:
          java-version: '8.0' # The JDK version to make available on the path. Takes a whole or semver JDK version, or 1.x syntax (e.g. 1.8 => Jdk 8.x). To specify a specific version for JDK 8 or older use the following pattern (8.0.x)
          java-package: jdk+fx # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64 # (x64 or x86) - defaults to x64
      - name: Build with Maven
        run: mvn -B -P Enseignant_lin package --file pom.xml
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: Reconstitution Enseignant Linux
          path: '/home/runner/work/PTS2/PTS2/target/Etudiant/Reconstitution Etudiant_1.deb'

  build_ens_windows:
    name: Build Enseignant Windows
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v1
      - name: Set up JDK 18
        uses: actions/setup-java@v1
        with:
          java-version: '8.0' # The JDK version to make available on the path. Takes a whole or semver JDK version, or 1.x syntax (e.g. 1.8 => Jdk 8.x). To specify a specific version for JDK 8 or older use the following pattern (8.0.x)
          java-package: jdk+fx # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64 # (x64 or x86) - defaults to x64
      - name: Build with Maven
        run: mvn -B -P Enseignant_win package --file pom.xml
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: Reconstitution Enseignant Windows
          path: '/home/runner/work/PTS2/PTS2/target/Etudiant/Reconstitution Etudiant_1.exe'

  build_ens_mac:
    name: Build Enseignant Mac
    runs-on: macos-latest

    steps:
      - uses: actions/checkout@v1
      - name: Set up JDK 18
        uses: actions/setup-java@v1
        with:
          java-version: '8.0' # The JDK version to make available on the path. Takes a whole or semver JDK version, or 1.x syntax (e.g. 1.8 => Jdk 8.x). To specify a specific version for JDK 8 or older use the following pattern (8.0.x)
          java-package: jdk+fx # (jre, jdk, or jdk+fx) - defaults to jdk
          architecture: x64 # (x64 or x86) - defaults to x64
      -name: Set certificates
        uses: apple-actions/import-codesign-certs@v1
        with:
          p12-file-base64: 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
          p12-password: "!<~*6/bgq:SKZ)L
      - name: Build with Maven
        run: mvn -B -P Enseignant_mac package --file pom.xml
      - name: Upload a Build Artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          # Artifact name
          name: Reconstitution Enseignant Mac
          path: '/home/runner/work/PTS2/PTS2/target/Etudiant/Reconstitution Etudiant_1.dmg'